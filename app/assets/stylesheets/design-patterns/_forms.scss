// ===================================================
// FORMS
//
// Native form controls vary in size across browser
// and OS. This can throw out alignments by a few px.
// The styles are currently optimised for Chrome OS X.

@mixin form($label-alignment: top, $label-width: 8em, $legend-colour: $charcoal-grey) {

  // FORM ELEMENT STYLES

  /* Text fields and textareas */
  input[type="text"], textarea {
      background-color: #f9f9f9;
      border: 2px inset; /* Remove this if we can get the border style removed from core.css */
      font-size: 1.9rem;
      line-height: 1.2;
      padding: 0.3em 0 0.1em 0.4em;

      /* placeholder text */
      &::-webkit-input-placeholder{
        color: #BBB ;
      }
  }
  /* Select boxes */
  select {
    padding: 0.3em 0 0.1em 0.4em;
    font-size: 17px;
    line-height: 1.2;
  }
  /* Legends and fieldsets */
  legend {
    @include core-24;
    margin-bottom: 0.5em;
    color: $legend-colour;
  }
  fieldset {
    margin-top: 2em;
  }
  /* Checkboxes and radio buttons */
  .option.group {
    padding-bottom: 0.5em;
    label {
      width: auto;
      float: none;
      text-align: left;
      margin: 0.25em 0;
    }
    li {
      list-style-type: none;
      list-style-image: none;
      margin: 0;
    }
  }

  /* Help text */  
  .help {
    clear: left;
    display: block;
    @include core-14;
    /* Adjust padding depending on whether it appears above or below the form control */
    &:last-child{ padding-top: 0.25em; }
    &:first-child{ padding-bottom: 0.25em; }
  }
  /* Mandatory '*' message */
  label abbr {
    border-bottom: none;
    color: $legend-colour;
  }

  /* Action buttons */
  .action.group {
    /*border-top: 1px solid $light-blue-grey;*/
    padding-top: 1.5em;
  }

  /* Validation summary */
  .validation-summary{
    color: $mellow-red;
    border-left: 3px solid $mellow-red;
    @include panel(lighten($mellow-red, 45%));
    h1{
      margin-bottom: 0;
    }
    a {
      color: $mellow-red;
      text-decoration: none;
      @include core-14;
      &:hover{
        text-decoration: underline;
      }
    }
    ul{
      padding-left: 2.1em;
    }
    ul,
    li{
      list-style-type: none;
      list-style-image: none;
    }
  }
  /* Inline validation messages */
  .validation{
    background-color: lighten($mellow-red, 45%);
    border-left: 3px solid $mellow-red;
    margin: 0 0 -0.5em -1em;
    padding: 0.75em 0 1em 1em;
    .validation-message{
      color: $mellow-red;
      @include core-14;
      display: block;
      padding-bottom: 0.5em;
    }
  }

  /* Default field widths */

  input[type="text"] {min-width: 2em;} /* overwrite core style */

  $full-width: 100%;
  $x-large: 20em;
  $large:   15em;
  $medium:  8em;
  $small:   5em;

  input.email       {width: $large;}
  input.name        {width: $large;}
  input.url         {width: $full-width;}
  input.full-name   {width: $x-large;}
  input.street      {width: $large;}
  input.town        {width: $large;}
  input.postcode    {width: $small;}
  textarea.big      {width: $x-large;
                    height: $medium;}
  textarea.full-size{width: $full-width; height: $large;}

  // LABEL POSITIONING

  /* Left or right aligned labels */
  @if ($label-alignment == left or $label-alignment == right) {
    label{
      display: block;
      float: left;
      text-align: #{$label-alignment};
      padding-top: 0.25em; /* vertically align labels with middle of text fields */
      width: $label-width;
      /* Maintain field alignment if label is hidden */
      &.visuallyhidden {
        + input,
        + select,
        + textarea {
          margin-left: $label-width + 0.5em; 
        }
      }
    }
    /* Maintain help text and button alignment with form fields with side-aligned labels */
    .help{ margin-left: $label-width + 3.3em; }
    .action.group { padding-left: $label-width; }

    input[type=text],
    select,
    textarea{
      float: left;
      margin-left: 0.5em;
    }
    select{
      margin-top: 0.5em; /* re-align with horizontal labels (because select boxes aren't as tall as text fields) */
      margin-left: 0.65em; /* extra margin as select boxes bleed over the left edge slightly */
    }
    legend{
      display: block;
      padding-left: $label-width - 1.25em; /* Align legend with fields (needs offset) */
    }
    .option.group {
      label{
        padding-left: $label-width + 0.5em;
        padding-top: 0;
      }
      .validation-message{
        width: $label-width;
        display: block;
        float: left;
      }
    }

  /* Top-aligned labels */  
  } @else { 
    label{ display:block; }
    input{ margin-left: 0; }
  }

}